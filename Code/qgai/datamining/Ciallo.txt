ğ‘ªğ’Šğ’‚ğ’ğ’ğ’ï½(âˆ ãƒ»Ï‰< )âŒ’â˜…

class DataMiningAgent

è¡¨æ ¼è§ tables.json
ç´¢å¼•è§ name_to_idx.json
åŸå§‹æµç¨‹è§ flows.json

ç©ºå€¼''
å›¾ç‰‡<IMG>
ç­¾å<SIG>
ç­¾ç« <SEL>
é¢„ç•™<PAD>
æ—¥æœŸ<DAT>

è€ƒè™‘å„åœ°è¡¨æ ¼ä¸ä¸€è‡´æ€§ï¼ˆä»¥åŠéƒ¨ä»½è¡¨æ ¼å†…å®¹ä¸ä¾¿äº¤äº’ï¼‰è¡¨æ ¼ä»…æä¾›å¿…è¦å…³é”®ä¿¡æ¯
åç»­ä¼˜åŒ–ï¼šå¢åŠ å¡«è¡¨æ—¶çš„å‹¾é€‰é¡¹ã€é€‰å¡«é¡¹ï¼ˆä¸äº¤äº’æ¨¡å—åè°ƒï¼‰

[å§“å, æ€§åˆ«, æ°‘æ—, è”ç³»ç”µè¯, èº«ä»½è¯å·ç , ç›¸ç‰‡]

[ç±è´¯, å‡ºç”Ÿæ—¥æœŸ, å±…ä½åœ°å€, æˆ·å£æ‰€åœ¨åœ°, æ”¿æ²»é¢è²Œ, å©šå§»çŠ¶å†µ, å®—æ•™ä¿¡ä»°, å­¦å†, èŒä¸š]

flow1.py ç”¨äºç”Ÿæˆjson

ERROR CODE:
-1  idx error
-2  api or net error
-3  user info error


    url = "http://localhost:11434/api/chat"
    headers = {"Content-Type": "application/json"}
        prompt = f""""""

    payload = json.dumps({
        "model": "DeepSeek-r1:7b",  # modelå‚æ•°
        "messages": [
            {"role": "system", "content": ""},
            {"role": "user", "content": prompt}
        ],
        # æ˜¯å¦å¼€å¯æµå¼æ¨ç†, é»˜è®¤ä¸ºFalse, è¡¨ç¤ºä¸å¼€å¯æµå¼æ¨ç†
        "stream": False,
        # åœ¨æµå¼è¾“å‡ºæ—¶æ˜¯å¦å±•ç¤ºä½¿ç”¨çš„tokenæ•°ç›®ã€‚åªæœ‰å½“streamä¸ºTrueæ—¶æ”¹å‚æ•°æ‰ä¼šç”Ÿæ•ˆã€‚
        # "stream_options": { "include_usage": True },
        # æ§åˆ¶é‡‡æ ·éšæœºæ€§çš„æµ®ç‚¹æ•°ï¼Œå€¼è¾ƒä½æ—¶æ¨¡å‹æ›´å…·ç¡®å®šæ€§ï¼Œå€¼è¾ƒé«˜æ—¶æ¨¡å‹æ›´å…·åˆ›é€ æ€§ã€‚"0"è¡¨ç¤ºè´ªå©ªå–æ ·ã€‚é»˜è®¤ä¸º0.6ã€‚
        "temperature": 1e-6
    }, ensure_ascii=False)
        response = requests.request("POST", url, headers=headers, data=payload.encode("utf-8"))
    # print(response.text)

    # å¤„ç†è¾“å‡º
    resp = response.json()
    output = resp['message']['content']
    output = re.sub(r'<think>.*?</think>', '', output, flags=re.DOTALL)
    if len(output) > 0:
        return output
    else:
        return '-2'

